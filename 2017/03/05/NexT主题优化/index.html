<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo,Git," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="前言本篇文章是在已经搭建好gitpage+hexo的博客的前提下（不懂怎么搭建的可以参考我的另一篇博文：极简搭建博客 或者Hexo和Git搭建博客，这两篇博文都教了大家最基础的怎么将博客搭建起来。本篇博文是使用next主题的进击版本，主要是有以下内容">
<meta name="keywords" content="Hexo,Git">
<meta property="og:type" content="article">
<meta property="og:title" content="NexT主题优化">
<meta property="og:url" content="http://RainyXY.github.io/2017/03/05/NexT主题优化/index.html">
<meta property="og:site_name" content="Rainy's Blog">
<meta property="og:description" content="前言本篇文章是在已经搭建好gitpage+hexo的博客的前提下（不懂怎么搭建的可以参考我的另一篇博文：极简搭建博客 或者Hexo和Git搭建博客，这两篇博文都教了大家最基础的怎么将博客搭建起来。本篇博文是使用next主题的进击版本，主要是有以下内容">
<meta property="og:image" content="http://img.blog.csdn.net/20170409220356907?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20170409212441592?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20170409213510970?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:updated_time" content="2017-04-26T05:03:22.867Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="NexT主题优化">
<meta name="twitter:description" content="前言本篇文章是在已经搭建好gitpage+hexo的博客的前提下（不懂怎么搭建的可以参考我的另一篇博文：极简搭建博客 或者Hexo和Git搭建博客，这两篇博文都教了大家最基础的怎么将博客搭建起来。本篇博文是使用next主题的进击版本，主要是有以下内容">
<meta name="twitter:image" content="http://img.blog.csdn.net/20170409220356907?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"right","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://RainyXY.github.io/2017/03/05/NexT主题优化/"/>





  <title> NexT主题优化 | Rainy's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0fb146923b2148c0d67487f0769e02a1";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










  
  
    
  

  <div class="container sidebar-position-right page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Rainy's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-life">
          <a href="/life" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heart"></i> <br />
            
            生活中的美好
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://RainyXY.github.io/2017/03/05/NexT主题优化/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rainy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rainy's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                NexT主题优化
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-05T00:00:00+08:00">
                2017-03-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/git/" itemprop="url" rel="index">
                    <span itemprop="name">git</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/03/05/NexT主题优化/" class="leancloud_visitors" data-flag-title="NexT主题优化">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  7,823
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  32
                </span>
              
            </div>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本篇文章是在已经搭建好gitpage+hexo的博客的前提下（不懂怎么搭建的可以参考我的另一篇博文：<a href="https://rainyxy.github.io/2017/04/23/%E6%9E%81%E7%AE%80%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/#more">极简搭建博客</a> 或者<a href="https://rainyxy.github.io/2017/04/22/hexo%E5%92%8Cgit%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/#more">Hexo和Git搭建博客</a>，这两篇博文都教了大家最基础的怎么将博客搭建起来。本篇博文是使用next主题的进击版本，主要是有以下内容<br><a id="more"></a></p>
<ul>
<li>域名绑定，将github博客和你的独有域名绑定</li>
<li>添加更多的menu内容</li>
<li>添加头像</li>
<li>定义网站个性logo</li>
<li>自定义样式，重写默认样式，个性化定制你的博客</li>
<li>炫酷动态背景制作</li>
<li>添加网易云音乐</li>
<li>添加网易云跟帖</li>
<li>添加leancloud阅读次数统计功能</li>
<li>添加wordcount页面字数统计</li>
<li>添加fork me on github功能</li>
</ul>
<p>要想最快的知道这些功能的效果，请移步我的个人博客：<a href="https://rainyxy.github.io/，顺便求个forkヽ(●´ε｀●)ノ">https://rainyxy.github.io/，顺便求个forkヽ(●´ε｀●)ノ</a><br><!--more--><br>首先要说一下我使用的版本，这个是很重要的，好多版本都已经进行了更新，特别是next主题集成了更多的插件，简直不要太爽＼（＠￣∇￣＠）／</p>
<blockquote>
<p>hexo  v3.2.2</p>
<p>next  v5.1.0</p>
<p>node v4.5.0</p>
</blockquote>
<p>在改成自己想要的效果之后，对整体的hexo的next主题我有了一个大概的了解，其实next主题的最新版（5.1）已经集成了大部分我们需要的插件，只需要在主题配置文件中将默认的false改为true即可，但是我们也仍然需要知道都有哪些新的功能，最有效的方法是直接去查看官网的api：<a href="http://theme-next.iissnan.com/" target="_blank" rel="external">next官网</a><img src="http://img.blog.csdn.net/20170409220356907?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<blockquote>
<p>授之于鱼不如授之于渔<br>希望我们都能够理解其源码，制作出属于自己专属的个性化博客(•̀ᴗ•́)</p>
</blockquote>
<p> 我们需要改的文件其实也就那么几个，大部分是不需要更改，next都已经帮我们配置好了~<br> 默认目录结构：</p>
<pre><code>.
├── .deploy
├── public
├── scaffolds
├── scripts
├── source
|   ├── _drafts
|   └── _posts
├── themes
├── _config.yml
└── package.json
</code></pre><ul>
<li>deploy：执行hexo deploy命令部署到GitHub上的内容目录</li>
<li>public：执行hexo generate命令，输出的静态网页内容目录</li>
<li>scaffolds：layout模板文件目录，其中的md文件可以添加编辑</li>
<li>scripts：扩展脚本目录，这里可以自定义一些javascript脚本</li>
<li>source：文章源码目录，该目录下的markdown和html文件均会被hexo处理。该页面对应repo的根目录，404文件、favicon.ico文件，CNAME文件等都应该放这里，该目录下可新建页面目录。<ul>
<li>drafts：草稿文章</li>
<li>posts：发布文章</li>
</ul>
</li>
<li>themes：主题文件目录</li>
<li>_config.yml：全局配置文件，大多数的设置都在这里</li>
<li>package.json：应用程序数据，指明hexo的版本等信息，类似于一般软件中的关于按钮</li>
</ul>
<p>我们最先修改的应该是在hexo根目录下的配置文件<code>_config.yml</code>文件，这里是配置整个站点的配置信息，在文章的最后贴出我的配置文件，有兴趣的朋友可以参考一下~<br> 其次就是我们的主题配置文件</p>
<p> 在对应的主题下的<code>_config.yml</code> 因为我使用的是next主题，所以目录的路径为<code>C:\Hexo\themes\next\_config.yml</code> 这里配置的是使用主题的配置文件，这个配置文件的东西就有点多了，我们大部分的修改也是在这个文件下完成的。比如说使用集成的第三方插件，默认为false，我们需要将其改为true并且配置相应的app_key就可以使用该插件了~有木有很方便(^ ◕ᴥ◕ ^)<br> 然后我们需要修改样式的话是需要设置css和甚至是修改模板，<br> 页面展现的全部逻辑都在每个主题中控制，源代码在hexo\themes\你使用的主题\中，以next主题为例：</p>
<pre><code>├── .github            #git信息
├── languages          #多语言
|   ├── default.yml    #默认语言
|   └── zh-Hans.yml      #简体中文
|   └── zh-tw.yml      #繁体中文
├── layout             #布局，根目录下的*.ejs文件是对主页，分页，存档等的控制
|   ├── _custom        #可以自己修改的模板，覆盖原有模板
|   |   ├── _header.swig    #头部样式
|   |   ├── _sidebar.swig   #侧边栏样式
|   ├── _macro        #可以自己修改的模板，覆盖原有模板
|   |   ├── post.swig    #文章模板
|   |   ├── reward.swig    #打赏模板
|   |   ├── sidebar.swig   #侧边栏模板
|   ├── _partial       #局部的布局
|   |   ├── head       #头部模板
|   |   ├── search     #搜索模板
|   |   ├── share      #分享模板
|   ├── _script        #局部的布局
|   ├── _third-party   #第三方模板
|   ├── _layout.swig   #主页面模板
|   ├── index.swig     #主页面模板
|   ├── page           #页面模板
|   └── tag.swig       #tag模板
├── scripts            #script源码
|   ├── tags           #tags的script源码
|   ├── marge.js       #页面模板
├── source             #源码
|   ├── css            #css源码
|   |   ├── _common    #*.styl基础css
|   |   ├── _custom    #*.styl局部css
|   |   └── _mixins    #mixins的css
|   ├── fonts          #字体
|   ├── images         #图片
|   ├── uploads        #添加的文件
|   └── js             #javascript源代码
├── _config.yml        #主题配置文件
└── README.md          #用GitHub的都知道
</code></pre><h1 id="公益404页面"><a href="#公益404页面" class="headerlink" title="公益404页面"></a>公益404页面</h1><p>GitHub Pages 自定义404页面非常容易，直接在根目录下创建自己的404.html就可以。但是自定义404页面仅对绑定顶级域名的项目才起作用，GitHub默认分配的二级域名是不起作用的，使用hexo server在本机调试也是不起作用的。</p>
<p>其实，404页面可以做更多有意义的事，来做个404公益项目吧。现在，看下我的404页面一个ibruce.info上不存在的页面，做点有意义的事情，也对得起这个域名。<br>目前有如下几个公益404接入地址，我选择了腾讯的。404页面，每个人可以做的更多。</p>
<ul>
<li><a href="https://syd192.github.io/photo/20161115/8.png" target="_blank" rel="external">腾讯公益404</a></li>
<li><a href="http://yibo.iyiyun.com/Index/web404" target="_blank" rel="external">404公益_益云(公益互联网)社会创新中心</a></li>
<li><a href="http://404page.missingkids.org.tw/" target="_blank" rel="external">失蹤兒童少年資料管理中心404</a></li>
</ul>
<h1 id="开启打赏功能"><a href="#开启打赏功能" class="headerlink" title="开启打赏功能"></a>开启打赏功能</h1><p>越来越多的平台（微信公众平台，新浪微博，简书，百度打赏等）支持打赏功能，付费阅读时代越来越近，特此增加了打赏功能，支持微信打赏和支付宝打赏。 只需要 主题配置文件 中填入 微信 和 支付宝 收款二维码图片地址 即可开启该功能。</p>
<p>打赏功能配置示例<br>    reward_comment: 坚持原创技术分享，您的支持将鼓励我继续创作！<br>    wechatpay: /path/to/wechat-reward-image<br>    alipay: /path/to/alipay-reward-image</p>
<h1 id="友情链接"><a href="#友情链接" class="headerlink" title="友情链接"></a>友情链接</h1><p>编辑 主题配置文件 添加：</p>
<p>友情链接配置示例</p>
<pre><code># title
links_title: Links
links:
  MacTalk: http://macshuo.com/
  Title: http://example.com/
</code></pre><h1 id="站点建立时间"><a href="#站点建立时间" class="headerlink" title="站点建立时间"></a>站点建立时间</h1><p>这个时间将在站点的底部显示，例如 © 2013 - 2015。 编辑 主题配置文件，新增字段 since。</p>
<p>配置示例<br>    since: 2013</p>
<h1 id="加入站点内容搜索功能"><a href="#加入站点内容搜索功能" class="headerlink" title="加入站点内容搜索功能"></a>加入站点内容搜索功能</h1><p>本站点使用的是Local Search。加入站点内容搜索功能步骤如下：</p>
<blockquote>
<p>安装hexo-generator-searchdb</p>
</blockquote>
<pre><code>$ npm install hexo-generator-searchdb --save
</code></pre><p>注意：安装时应在站点根目录下，即myBlog目录下</p>
<blockquote>
<p>添加search字段</p>
</blockquote>
<p>在站点<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">	search:</div><div class="line">	path: search.xml</div><div class="line">	field: post</div><div class="line">	format: html</div><div class="line">	limit: 10000</div><div class="line"></div><div class="line"># 主题颜色</div><div class="line">NexT主旨在于简洁优雅且易于使用，主题本身提供了三种样式供用户选择，但色彩过于单一，今天为大家介绍如何修改主题的颜色和增加背景图片。</div><div class="line"></div><div class="line">打开```hexo/themes/next/source/css/_variables/base.styl```找到Colors代码段，如下：</div><div class="line"></div><div class="line">	// Colors</div><div class="line">	// colors for use across theme.</div><div class="line">	// --------------------------------------------------</div><div class="line">	  $whitesmoke   = #f5f5f5</div><div class="line">	  $gainsboro    = #eee  //这个是边栏头像外框的颜色，</div><div class="line">	  $gray-lighter = #ddd  //文章中插入图片边框颜色</div><div class="line">	  $grey-light   = #ccc  //文章之间分割线、下划线颜色</div><div class="line">	  $grey         = #bbb  //页面选中圆点颜色</div><div class="line">	  $grey-dark    = #999</div><div class="line">	  $grey-dim     = #666 //侧边栏目录字体颜色</div><div class="line">	  $black-light  = #555 //修改文章字体颜色</div><div class="line">	  $black-dim    = #333</div><div class="line">	  $black-deep   = #495a80  //修改主题的颜色，这里我已经改成老蓝色了。</div><div class="line">	  $red          = #ff2a2a</div><div class="line">	  $blue-bright  = #87daff</div><div class="line">	  $blue         = #0684bd</div><div class="line">	  $blue-deep    = #262a30</div><div class="line">	  $orange       = #F39D01 //浏览文章时，目录选中的颜色</div><div class="line"></div><div class="line">其他的可以自行更改，看看效果</div><div class="line"></div><div class="line"># 图床</div><div class="line"></div><div class="line">考虑到博客的速度，同时也为了便于博客的迁移，图床是必须的。我墙裂推荐七牛，访问速度极快，支持日志、防盗链和水印。</div><div class="line"></div><div class="line">免费用户有每月10GB流量+总空间10GB+PUT/DELETE 10万次请求+GET 100万次请求，这对个人博客来说足够，不够的话点这个活动页面，也可通过邀请好友获得奖励，我也求一下七牛邀请。有一点要说明的是，七牛没有目录的概念，但是文件名可以包含/，比如2013/11/27/reading/photos-0.jpg，参考这里关于key-value存储系统。</div><div class="line"></div><div class="line">七牛除了作为图床还可以作为其他静态文件存储空间，比如我的个人站点首页有个字库文件和JS文件下载较慢，有时间会把它弄到七牛上去，以提高首页打开速度。请看这篇Linux中国采用七牛云存储支撑图片访问。</div><div class="line"></div><div class="line">如果非要说不足的话，就是文件管理界面不是很友好，不支持CNAME到分配的永久链接，也不能绑定未备案的自有域名，必须备案才可以。</div><div class="line"></div><div class="line">如果你对七牛web版的文件管理界面不满意，可以用官方的七牛云存储工具。</div><div class="line"></div><div class="line">您还可以使用如下图床服务 FarBox，Dropbox，又拍云。</div><div class="line"></div><div class="line"># 主题背景</div><div class="line"></div><div class="line">打开```hexo/themes/next/source/css/_schemes/Pisces/index.styl```(Pisces为NexT提供的三种主题之一，根据使用的主题选择）修改```body&#123;&#125;```内的值，如下：</div><div class="line">背景颜色直接更改即可：```body &#123; background: #F0F0F0; &#125;</div></pre></td></tr></table></figure></p>
<p>添加背景：<figure class="highlight plain"><figcaption><span>&#123; background: url（'/images/background.jpg'); &#125;```(将背景图片放到```hexo/source/images```中即可。</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"># 加入数据统计与分析功能</div><div class="line"></div><div class="line">本站点使用的是百度统计。加入数据统计与分析功能步骤如下：</div><div class="line"></div><div class="line"> - 注册站长账号并登陆</div><div class="line"> </div><div class="line">在这里注册站长账号，并填写信息，网站域名和网站首页以下图为例来填写，注册完成后并登陆。</div><div class="line">![这里写图片描述](https://syd192.github.io/photo/20161115/8.png )</div><div class="line"></div><div class="line"> - 在跳转的页面中会显示下图，复制hm.js后的id值</div><div class="line"> </div><div class="line"></div><div class="line"> </div><div class="line">![这里写图片描述](https://syd192.github.io/photo/20161115/9.png )</div><div class="line"></div><div class="line"> - 添加baidu_analytics字段</div><div class="line">在站点myBlog/_config.yml中添加search字段，值为上步复制的id值</div><div class="line"></div><div class="line">至此，该功能已成功加入，大约过20min后在百度统计上可以看到站点的访问情况，如下图：</div><div class="line">![这里写图片描述](https://syd192.github.io/photo/20161115/10.png )</div><div class="line"></div><div class="line"># 隐藏网页底部powered By Hexo / 强力驱动</div><div class="line"></div><div class="line">打开```hexo/themes/next/layout/_partials/footer.swig```,使用”&lt;!— —&gt;”隐藏之间的代码即可（隐藏后代码如下），或者直接删除。 </div><div class="line">这时，该行信息即被隐藏，但留有空白，如果你开启了网站流量统计，那么在统计和版权之间会有空行，很不美观，以下方法修改网站流量统计的位置。我这里使用的是不蒜子统计，其他统计类似。</div><div class="line"></div><div class="line">打开```hexo/themes/next/layout/_scripts/third-party/analytics/busuanzi-counter.swig```将两个&lt;span&gt;标签的class属性改为“powered-by”和“theme-info”，对这里使用了刚才删除hexo和主题信息标签的CSS属性，修改后代码如下：</div><div class="line"></div><div class="line">	&#123;% if theme.busuanzicount.enable %&#125;</div><div class="line">		  &#123;% if theme.busuanzicount.siteuv %&#125;</div><div class="line">			&#123;&#123; theme.busuanzicount.siteuvheader &#125;&#125;&#123;&#123; theme.busuanzicount.siteuvfooter &#125;&#125;</div><div class="line">		  &#123;% endif %&#125;</div><div class="line">	  &#123;% if theme.busuanzicount.sitepv %&#125;</div><div class="line">			&#123;&#123; theme.busuanzicount.sitepvheader &#125;&#125;&#123;&#123; theme.busuanzicount.sitepvfooter &#125;&#125;</div><div class="line">		  &#123;% endif %&#125;</div><div class="line">	&lt;/div&gt;</div><div class="line">	&#123;% endif %&#125;</div><div class="line"></div><div class="line">修改后效果如下：</div><div class="line"></div><div class="line">![这里写图片描述](http://images2015.cnblogs.com/blog/395235/201611/395235-20161124141926112-883484784.png )</div><div class="line"></div><div class="line">图上有没有发现我的是一个五角星，默认为心型，在刚才footer.swig文件中找到如下代码：</div><div class="line"></div><div class="line">	&lt;span class=&quot;with-love&quot;&gt;</div><div class="line">	    &lt;i class=&quot;fa fa-star&quot;&gt;&lt;/i&gt;</div><div class="line">	&lt;/span&gt;</div><div class="line">修改i标签的class属性fa-love，我这里改成了fa-star，有兴趣的朋友可以试试。</div><div class="line"></div><div class="line"></div><div class="line"># 绑定域名</div><div class="line">绑定域名的思路如下：</div><div class="line"></div><div class="line"> - 在万网购买自己喜欢的域名（.com的会贵一点，.site和.xyz的相对便宜一些，有的只需要几块钱一年就可以）</div><div class="line"> - 解析DNS</div><div class="line"> - 在hexo中添加CNAME文件</div><div class="line"></div><div class="line"> </div><div class="line">## 购买域名</div><div class="line">之前没有买域名的时候我想使用网易云跟帖，发现在注册网易云跟帖的时候使用原来的域名提示“url已被使用”，这是因为网易云跟帖不认可二级域名，所以要自己买域名。</div><div class="line">我选择的是[万网](https://wanwang.aliyun.com/)，阿里下面的。我选择了一个`.site`的域名，原价8元，使用阿里云app支付还优惠5元，等于3元到手一个域名（一年）~</div><div class="line">按照官网的步骤一步一来就可以了~</div><div class="line">## 解析DNS</div><div class="line">购买完域名之后我们需要解析DNS地址，在管理控制台中的左侧有域名选项，然后找到你的域名，点击后面的“解析”</div><div class="line">![这里写图片描述](http://img.blog.csdn.net/20170409132041051?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast )</div><div class="line"> </div><div class="line">  点击添加解析，记录类型选A或CNAME，</div><div class="line">  </div><div class="line"></div><div class="line">&gt; A记录的记录值就是ip地址，github(官方文档)提供了两个IP地址，192.30.252.153和192.30.252.154，这两个IP地址为github的服务器地址，两个都要填上，</div><div class="line">&gt; 解析记录设置两个www和@，线路就默认就行了，CNAME记录值填你的github博客网址。如我的是rainyxy.github.io。</div><div class="line"></div><div class="line">## 在hexo中添加CNAME文件</div><div class="line">接下来在你的hexo文件夹下source文件夹下新建一个CANME文件,里面加上你刚刚购买的域名比如我的`cherryblog.site`</div><div class="line">![这里写图片描述](http://img.blog.csdn.net/20170409141726073?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast )</div><div class="line">然后你就可以`hexo clean`,`hexo g`，`hexo d` 发布你的博客看看效果啦~</div><div class="line">![这里写图片描述](http://img.blog.csdn.net/20170409142438270?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast )</div><div class="line">**在这里我出现一个问题，就是单独输入域名是可以访问的，但是前面加上www之后就访问不了了** </div><div class="line"># 添加菜单页</div><div class="line">添加菜单页的思路（添加菜单页就是添加一个页面，有两种方式）：第一种是使用git命令`hexo new page &quot;photo&quot;` 就直接创建了` C:\Hexo\source\photo\index.md</div><div class="line">`文件，然后编辑index.md 文件就可以了~</div><div class="line">![这里写图片描述](http://img.blog.csdn.net/20170409165246422?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)</div><div class="line"></div><div class="line">第二种：手动创建上面的文件= =</div><div class="line"></div><div class="line"> - 在主题的配置文件添加menu索引路径（根路径是hexo/source）,所以你如果想要更改页面的内容就去hexo/source下找到对应的文件夹，默认内容是在其index.md文件下</div><div class="line"> - 在hexo的source文件下添加对应的文件夹</div><div class="line"> - 在主题的配置文件添加menu_icon字段设置对应的icon</div><div class="line"> - 修改language文件下zh-hans语言包</div><div class="line"> - 在发表文章的时候添加对应的menu字段就可以看到</div><div class="line"></div><div class="line"> </div><div class="line">刚开始的时候不理解怎么添加分类页和添加文章的区别，公司有一个项目用到了wordpress，然后发现两者有相似的地方，不同的就是wordpress是有可视化的操作后台，而hexo是需要git bash自己创建**首先我们要分清什么是页面，什么是文章，**</div><div class="line">**在hexo中menu下的内容都是新的页面**我们可以通过`hexo new page &quot;pagename&quot;` 创建，hexo默认的页面只有`home`,`archives`,`tags` 三个，之后我们写的博文就是文章，通过`hexo new &quot;name&quot;` 创建的`name.md` 文件在根目录的`source\_posts` 下，在每一个文章的头部，我们可以配置其tags或者categories内容，相当于文章是页面的下一级 </div><div class="line">## 在配置文件中添加menu索引路径</div><div class="line">我们可以在主题配置的_config文件下找到相应的字段，字段前加`#` 表示被注释掉，我们也可以自己添加menu的内容，比如我又新增了两个menu`life` 和`photo`</div><div class="line">![这里写图片描述](http://img.blog.csdn.net/20170409143920151?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast )</div><div class="line">这里添加的字段其实是加上文件索引的路径，这里hexo设置的根路径是`hexo/source` 接下来我们在这个根路径下建立相应的文件夹就可以实现点击mune跳转到相应的页面上了</div><div class="line">![这里写图片描述](http://img.blog.csdn.net/20170409151941047?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast ),</div><div class="line">没有明白什么意思的同学看下图</div><div class="line"></div><div class="line"> </div><div class="line">## 在source文件添加menu文件夹</div><div class="line">我们需要在这个路径下自己建立对应的页面，比如说我新建了menu`life` 和`photos`，然后再source文件夹下面新建两个名字为`life` 和`photo` 的文件夹，里面添加一个`index.md` markdown文件，内容是类似这样的</div><div class="line"></div><div class="line">	---</div><div class="line">	title: photo</div><div class="line">	date: 2017-04-04 22:14:07</div><div class="line">	type: &quot;photo&quot;</div><div class="line">	comments: false</div><div class="line">	---</div><div class="line">	啦啦啦~</div><div class="line"></div><div class="line">![这里写图片描述](http://img.blog.csdn.net/20170409152554707?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast )</div><div class="line">这是一个markdown文件，你可以自己编写</div><div class="line"></div><div class="line">## 给menu添加icon</div><div class="line">如果只是上面的步骤，那么你可能会创建出一个新的页面，但是显示的效果会是这样：![这里写图片描述](http://img.blog.csdn.net/20170409153513929?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast )</div><div class="line"></div><div class="line">怎么icon没有换？？？其实hexo中换icon是一个很简单的事情，因为hexo集成了`FontAwsome` 所以我们只需要在主题的配置文件中加入相应的icon名字即可</div><div class="line">![这里写图片描述](http://img.blog.csdn.net/20170409153837056?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast )</div><div class="line">## 查找`FontAwsome` icon</div><div class="line"> 这时候你想要换一个自己喜欢的icon怎么办，这就需要自己动手，丰衣足食了，你需要自己到[FontAwsome官网](http://www.bootcss.com/p/font-awesome/#)，然后鼠标往下拉，在图标集中选择自己喜欢的icon，然后记住名字，保存在上面的menu_icon字段中就可以啦~</div><div class="line"> ![这里写图片描述](http://img.blog.csdn.net/20170409154335951?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)tips ：在字段中只需要填写icon-name后面跟的name即可，不需要加上前面的&quot;icon-&quot;</div><div class="line">## 在language添加zh-hans翻译字段</div><div class="line">上面的步骤完成之后你会发现，在你的博客首页显示的仍然是英文名，而我们想要有一个中文的名字，并且想要个性化定制我们的页面，我们可以在主题的language文件下的zh-hans（中文）语言包下增加相应的字段（做过翻译的童鞋应该都知道什么意思~）还可以修改其他的字段，这样就可以定制我们的博客了呢~</div><div class="line"> ![这里写图片描述](http://img.blog.csdn.net/20170409171442363?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)</div><div class="line">## 在发表文章的时候添加对应的menu字段</div><div class="line">在我们写文章的时候只要在头部信息添加相应的字段就在tags页面和categories中显示相应的分类，例如:</div><div class="line"></div><div class="line">	---</div><div class="line">	title: Git使用中的报错情况</div><div class="line">	date: 2017-03-11 23:54:11</div><div class="line">	tags: [git,实战经验] </div><div class="line">	categories: git</div><div class="line">	---</div><div class="line"></div><div class="line">tags、categories都是支持数组的形式的，可以添加多个tags、categories。这样我们在tags、categories页面就可以看见相应的分类了</div><div class="line">![这里写图片描述](http://img.blog.csdn.net/20170409172519879?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)</div><div class="line"># 添加头像</div><div class="line">我使用的主题头像是位于侧边栏，显示的效果如下，</div><div class="line">![这里写图片描述](http://img.blog.csdn.net/20170409172733268?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)要添加一个这个的头像要怎么操作呢，其实思路就是将你要上传的头像放在你的文件夹中，然后再配置文件中引用正确的路径即可，当然也可以上传绝对路径。在你的主题配置文件找到avatar字段，然后将你得图片路径写在后面，我是新建了一个uploads文件夹，将图片放在下面</div><div class="line"></div><div class="line">	# Sidebar Avatar</div><div class="line">	# in theme directory(source/images): /images/avatar.jpg</div><div class="line">	# in site  directory(source/uploads): /uploads/avatar.jpg</div><div class="line">	avatar: /uploads/avatar.png</div><div class="line"></div><div class="line">![这里写图片描述](http://img.blog.csdn.net/20170409173222538?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)</div><div class="line"></div><div class="line">或者是一种比较简单的方法</div><div class="line"></div><div class="line">在主题下的```source/images/```下放置头像文件```avatar.gif```即可。</div><div class="line"># 设置网站logo</div><div class="line">跟设置头像其实是一个思路，都是在配置文件中引入正确的地址就可以了，不过网站的logo是对图片有要求的，我们需要在[Favicon在线制作](http://tool.lu/favicon/)工具中制作32*32的.ico图片，然后放在source/images下面。然后在主题配置文件下添加主题配置文件中添加：`favicon: images/favicon.ico`</div><div class="line"># 自定义样式</div><div class="line">不得不说next还是很人性化的，你可以个性化定制你的网站，你所有的改动（css）需要放在主题文件的source/css/_costum/costum.styl文件中，会覆盖原来的css，所以只要你不想要你修改的样式，只需要删除这个文件夹就可以了，再也不用担心还原不回去了~</div><div class="line">![这里写图片描述](http://img.blog.csdn.net/20170409174107213?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)</div><div class="line"># 炫酷动态背景</div><div class="line">之前做过一个类似的canvas-nest的效果。新版本的next已经支持canvas-nest了，但是效果不怎么样，就不用了，但是也介绍一下，毕竟简单，只有两步就可以了。</div><div class="line">添加修改代码`next/layout/_layout.swig`在`&lt;/body&gt;`之前加上</div><div class="line"></div><div class="line">	&#123;% if theme.canvas_nest %&#125;</div><div class="line">	&lt;script type=&quot;text/javascript&quot; src=&quot;//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js&quot;&gt;&lt;/script&gt;</div><div class="line">	&#123;% endif %&#125;</div><div class="line"></div><div class="line">打开`next/_config.yml`，添加以下代码就可以了：</div><div class="line">	</div><div class="line">	# Canvas-nest</div><div class="line">	canvas_nest: true</div><div class="line"></div><div class="line">这种虽然简单，但是我认为效果不够好，于是我决定添加原生的js来仿知乎的登录界面做背景，这就需要修改模板来实现了。首先我们要知道next文件的结构，这样我们想改什么就知道在什么位置了~</div><div class="line">![这里写图片描述](http://img.blog.csdn.net/20170409180317491?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)</div><div class="line">所以我们需要在layout下面的`_layout.swig` 添加一个canvas</div><div class="line"></div><div class="line">然后使用原生js写一个仿知乎页面,详情script代码可以从github上</div><div class="line"></div><div class="line"> - clone：</div><div class="line">  - https://github.com/sunshine940326/canvas-nest</div><div class="line"></div><div class="line"> 内容我放在附录2里了，大家可以去看最下面(*^__^*) </div><div class="line"></div><div class="line"></div><div class="line"># 添加网易云音乐</div><div class="line"></div><div class="line">## HTTP环境</div><div class="line"></div><div class="line">这次主要分两类来讲，一类是http环境</div><div class="line">也就是网址格式为&quot;http://www.xxx.com&quot;或&quot;http://xxx.com&quot;的网站</div><div class="line"></div><div class="line">在知道了页面的结构之后，你就可以将你的播放器添加在页面的任意位置，开始我是放在了首页，然后发现一上来就自动播放太吵了，于是就放在了侧边栏，想要听得朋友可以手动点击播放，</div><div class="line">我们可以直接在网易云音乐中搜索我们想要插入的音乐，然后点击生成外链播放器</div><div class="line">![这里写图片描述](http://img.blog.csdn.net/20170409181717791?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)</div><div class="line">然后可以根据你得设置生成相应的html代码，将获得的html代码插入到你想要插入的位置即可</div><div class="line">![这里写图片描述](http://img.blog.csdn.net/20170409181941920?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)</div><div class="line">我放在了`layout/_macro/sidebar.swig` 文件下</div><div class="line">	</div><div class="line">	&lt;div id=&quot;music163player&quot;&gt;</div><div class="line">	    &lt;iframe frameborder=&quot;no&quot; border=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; width=280 height=86 src=&quot;//music.163.com/outchain/player?type=2&amp;id=38358214&amp;auto=0&amp;height=66&quot;&gt;</div><div class="line">	    &lt;/iframe&gt;</div><div class="line">	&lt;/div&gt;</div><div class="line"></div><div class="line">然后就可以在侧边栏看见我的播放器了~</div><div class="line">![这里写图片描述](http://img.blog.csdn.net/20170409191354574?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)</div><div class="line"></div><div class="line">但是上面介绍的方法，都只能在某一个页面播放，如某一篇文章或者留言板等。</div><div class="line">一旦页面跳转则没有了…不像WP可以全站背景音乐</div><div class="line"></div><div class="line">## HTTPS环境</div><div class="line"></div><div class="line">现在使用https的网站越来越多，像百度、淘宝等等都是如此</div><div class="line">另外使用github搭建hexo的同学们，现在gh-pages已经强制要求全站https啦</div><div class="line"></div><div class="line">这种网站格式一般为&quot;https://xxx.github.io&quot;</div><div class="line">然后…发现网易云音乐已经不能正常使用了</div><div class="line"></div><div class="line">由于网易云目前并不支持https，所以我们只能通过插件来实现音乐播放</div><div class="line">这里需要使用到163music-APlayer-you-get-docker项目</div><div class="line"></div><div class="line">在github项目文档上我们可以看见，参数实在是太多，再加上版本迭代和英文介绍，我一脸懵逼…</div><div class="line"></div><div class="line">但是在iframe用法里面，我发现有一个demos</div><div class="line"></div><div class="line">	https://music.daoapp.io/iframe?song=287749&amp;qnarrow=1&amp;qssl=1</div><div class="line">格式非常像上文介绍的网易云外链，于是我尝试直接替换为</div></pre></td></tr></table></figure></p>
<pre><code>&lt;iframe frameborder=&quot;no&quot; border=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; width=330 height=86 src=&quot;https://music.daoapp.io/iframe?song=287749&amp;qssl=1&amp;qlrc=0&amp;qnarrow=0&amp;autoplay=1&quot;&gt;&lt;/iframe&gt;
</code></pre><p>```</p>
<p><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="https://music.daoapp.io/iframe?song=287749&qssl=1&qlrc=0&qnarrow=0&autoplay=0"></iframe><br>也就是把src=””里面的链接换掉，其他保持不变<br>接着来分析这段代码</p>
<pre><code>width和height是播放器的宽度和高度
287749这串数字是网易云音乐的歌曲编号
qlrc=0代表不显示歌词
autoplay=1代表自动播放
</code></pre><p>这样如果没有特殊要求的话，每次只需在网易云找好歌曲编号，然后替换这串数字即可<br>粘贴到.md文件里面</p>
<p>这个项目的玩法非常多，如果需要显示歌词的话<br>修改qlrc=1为再调整下播放器宽度（width）高度（height）数值</p>
<h1 id="网易云跟帖"><a href="#网易云跟帖" class="headerlink" title="网易云跟帖"></a>网易云跟帖</h1><p>之前用的是多说，但是多说在2017年6月1日就关闭评论服务了= =，很忧伤，于是转到了网易云跟帖。由于最新版（5.1）版本的next已经集成了网易云跟帖，所以只需要在主题的设置文件中配置你的productKey就可以了。获取productKey也很简单，在官网<a href="https://manage.gentie.163.com/" target="_blank" rel="external">网易云跟帖</a>中注册，然后在获取代码&gt;通用代码中拿到productKey，之后在你的主题配置文件中的gentie_productKey字段后添加即可~</p>
<p>#添加Fork me on GitHub<br>去网址<a href="https://github.com/blog/273-github-ribbons" target="_blank" rel="external">https://github.com/blog/273-github-ribbons</a> 挑选自己喜欢的样式，并复制代码，添加到themes\next\layout_layout.swig的body标签之内即可<br>记得把里面的url换成自己的!</p>
<h1 id="hexo-wordcount实现统计功能"><a href="#hexo-wordcount实现统计功能" class="headerlink" title="hexo-wordcount实现统计功能"></a>hexo-wordcount实现统计功能</h1><p><img src="http://img.blog.csdn.net/20170409212441592?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>wordcount可以实现字数统计，阅读时常还有总字数的统计功能<br>只需要<code>npm install hexo-wordcount --save</code> 就可以安装wordcount插件，<br>主要功能<br>字数统计:WordCount<br>阅读时长预计:Min2Read<br>总字数统计: TotalCount<br>安装完插件之后在主题的配置文件中开启该功能就可以~</p>
<pre><code># Post wordcount display settings
# Dependencies: https://github.com/willin/hexo-wordcount
post_wordcount:
  item_text: true
  wordcount: true
  min2read: true
</code></pre><h1 id="leancloud阅读次数统计"><a href="#leancloud阅读次数统计" class="headerlink" title="leancloud阅读次数统计"></a>leancloud阅读次数统计</h1><p>next也集成了leancloud，在<a href="https://leancloud.cn/" target="_blank" rel="external">leancloud官网</a><br>中注册账号等一步一步的操作就不说了哈~，我们主要是为了拿到app_key和app_id,然后在主题配置文件做一下配置</p>
<pre><code># Show number of visitors to each article.
# You can visit https://leancloud.cn get AppID and AppKey.
leancloud_visitors:
  enable: true
  app_id: yourapp_id
  app_key: yourapp_key
</code></pre><p>然后再leancloud的控制台中的存储添加一个counter的class就可以检测到我们的浏览量了，同时在你文章的副标题也可以看到有阅读次数的显示<br><img src="http://img.blog.csdn.net/20170409213510970?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3Vuc2hpbmU5NDAzMjY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h1 id="个人网站地址：https-rainyxy-github-io-，顺便求个fork"><a href="#个人网站地址：https-rainyxy-github-io-，顺便求个fork" class="headerlink" title="个人网站地址：https://rainyxy.github.io/，顺便求个fork"></a>个人网站地址：<a href="https://rainyxy.github.io/，顺便求个fork">https://rainyxy.github.io/，顺便求个fork</a></h1><h1 id="致谢"><a href="#致谢" class="headerlink" title="致谢"></a>致谢</h1><p>在这里我聚集了很多人的教程，也希望能让能多的人知道如何去做，还有<a href="http://theme-next.iissnan.com/theme-settings.html#site-since" target="_blank" rel="external">NexT</a>官网可以参照，希望大家能美化好自己的博客♪(^∇^*)</p>
<h1 id="附录1：站点配置文件"><a href="#附录1：站点配置文件" class="headerlink" title="附录1：站点配置文件"></a>附录1：站点配置文件</h1><pre><code># Hexo Configuration
## Docs: https://hexo.io/docs/configuration.html
## Source: https://github.com/hexojs/hexo/

# Site                  站点信息
title: Rainy&apos;s Blog     #站点名字 
subtitle:               #副标题
description: 奔跑不单是一种能力，更是一种态度，决定你人生高度的态度。                   #站点描述，在侧边栏显示
author: Rainy           #博主名字
language: zh-Hans       #使用的语言包，语言包在主题文件的language文件夹下，可以更改网站显示出的文案
timezone:

# URL
## If your site is put in a subdirectory, set url as &apos;http://yoursite.com/child&apos; and root as &apos;/child/&apos;
url: http://RainyXY.github.io
root: /
permalink: :year/:month/:day/:title/
permalink_defaults:

# Directory
source_dir: source
public_dir: public
tag_dir: tags
archive_dir: archives
category_dir: categories
code_dir: downloads/code
i18n_dir: :lang
skip_render:

# Writing
new_post_name: :title.md # File name of new posts
default_layout: post
titlecase: false # Transform title into titlecase
external_link: true # Open external links in new tab
filename_case: 0
render_drafts: false
post_asset_folder: true         #新建一个页面后自动生成一个同名文件夹（默认为false）
relative_link: false
future: true
highlight:
  enable: true
  line_number: true
  auto_detect: false
  tab_replace:

# Category &amp; Tag
default_category: uncategorized
category_map:
tag_map:

# Date / Time format
## Hexo uses Moment.js to parse and display date
## You can customize the date format as defined in
## http://momentjs.com/docs/#/displaying/format/
date_format: YYYY-MM-DD
time_format: HH:mm:ss

# Pagination
## Set per_page to 0 to disable pagination
per_page: 10
pagination_dir: page

# Extensions
## Plugins: https://hexo.io/plugins/
## Themes: https://hexo.io/themes/
theme: next

search:
  path: search.xml
  field: post
  format: html
  limit: 10000

# Deployment
## Docs: https://hexo.io/docs/deployment.html
deploy:
  type: git
  repo: git@github.com:RainyXY/RainyXY.github.io.git
  branch: master
</code></pre><h1 id="附录2：背景脚本"><a href="#附录2：背景脚本" class="headerlink" title="附录2：背景脚本"></a>附录2：背景脚本</h1><pre><code>&lt;script&gt;
class Circle {
    //创建对象
    //以一个圆为对象
    //设置随机的 x，y坐标，r半径，_mx，_my移动的距离
    //this.r是创建圆的半径，参数越大半径越大
    //this._mx,this._my是移动的距离，参数越大移动
    constructor(x, y) {
        this.x = x;
        this.y = y;
        this.r = Math.random() * 10 ;
        this._mx = Math.random() ;
        this._my = Math.random() ;

    }

    //canvas 画圆和画直线
    //画圆就是正常的用canvas画一个圆
    //画直线是两个圆连线，为了避免直线过多，给圆圈距离设置了一个值，距离很远的圆圈，就不做连线处理
    drawCircle(ctx) {
        ctx.beginPath();
        //arc() 方法使用一个中心点和半径，为一个画布的当前子路径添加一条弧。
        ctx.arc(this.x, this.y, this.r, 0, 360)
        ctx.closePath();
        ctx.fillStyle = &apos;rgba(204, 204, 204, 0.3)&apos;;
        ctx.fill();
    }

    drawLine(ctx, _circle) {
        let dx = this.x - _circle.x;
        let dy = this.y - _circle.y;
        let d = Math.sqrt(dx * dx + dy * dy)
        if (d &lt; 150) {
            ctx.beginPath();
            //开始一条路径，移动到位置 this.x,this.y。创建到达位置 _circle.x,_circle.y 的一条线：
            ctx.moveTo(this.x, this.y);   //起始点
            ctx.lineTo(_circle.x, _circle.y);   //终点
            ctx.closePath();
            ctx.strokeStyle = &apos;rgba(204, 204, 204, 0.3)&apos;;
            ctx.stroke();
        }
    }

    // 圆圈移动
    // 圆圈移动的距离必须在屏幕范围内
    move(w, h) {
        this._mx = (this.x &lt; w &amp;&amp; this.x &gt; 0) ? this._mx : (-this._mx);
        this._my = (this.y &lt; h &amp;&amp; this.y &gt; 0) ? this._my : (-this._my);
        this.x += this._mx / 2;
        this.y += this._my / 2;
    }
}
//鼠标点画圆闪烁变动
class currentCirle extends Circle {
    constructor(x, y) {
        super(x, y)
    }

    drawCircle(ctx) {
        ctx.beginPath();
        //注释内容为鼠标焦点的地方圆圈半径变化
        //this.r = (this.r &lt; 14 &amp;&amp; this.r &gt; 1) ? this.r + (Math.random() * 2 - 1) : 2;
        this.r = 8;
        ctx.arc(this.x, this.y, this.r, 0, 360);
        ctx.closePath();
        //ctx.fillStyle = &apos;rgba(0,0,0,&apos; + (parseInt(Math.random() * 100) / 100) + &apos;)&apos;
        ctx.fillStyle = &apos;rgba(255, 77, 54, 0.3)&apos;
        ctx.fill();

    }
}
//更新页面用requestAnimationFrame替代setTimeout
window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;

let canvas = document.getElementById(&apos;canvas&apos;);
let ctx = canvas.getContext(&apos;2d&apos;);
let w = canvas.width = canvas.offsetWidth;
let h = canvas.height = canvas.offsetHeight;
let circles = [];
let current_circle = new currentCirle(0, 0)

let draw = function () {
    ctx.clearRect(0, 0, w, h);
    for (let i = 0; i &lt; circles.length; i++) {
        circles[i].move(w, h);
        circles[i].drawCircle(ctx);
        for (j = i + 1; j &lt; circles.length; j++) {
            circles[i].drawLine(ctx, circles[j])
        }
    }
    if (current_circle.x) {
        current_circle.drawCircle(ctx);
        for (var k = 1; k &lt; circles.length; k++) {
            current_circle.drawLine(ctx, circles[k])
        }
    }
    requestAnimationFrame(draw)
}

let init = function (num) {
    for (var i = 0; i &lt; num; i++) {
        circles.push(new Circle(Math.random() * w, Math.random() * h));
    }
    draw();
}
window.addEventListener(&apos;load&apos;, init(60));
window.onmousemove = function (e) {
    e = e || window.event;
    current_circle.x = e.clientX;
    current_circle.y = e.clientY;
}
window.onmouseout = function () {
    current_circle.x = null;
    current_circle.y = null;

};
&lt;/script&gt;
</code></pre>
      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Hexo/" rel="tag"># Hexo</a>
          
            <a href="/tags/Git/" rel="tag"># Git</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/03/07/换了电脑使用Hexo更新博客/" rel="next" title="换了电脑使用Hexo更新博客">
                <i class="fa fa-chevron-left"></i> 换了电脑使用Hexo更新博客
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/03/04/极简搭建博客/" rel="prev" title="极简搭建博客">
                极简搭建博客 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Rainy" />
          <p class="site-author-name" itemprop="name">Rainy</p>
           
              <p class="site-description motion-element" itemprop="description">奔跑不单是一种能力，更是一种态度，决定你人生高度的态度。</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>

          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/RainyXY" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/Rainy_X" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/Rainly_X" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#公益404页面"><span class="nav-number">2.</span> <span class="nav-text">公益404页面</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#开启打赏功能"><span class="nav-number">3.</span> <span class="nav-text">开启打赏功能</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#友情链接"><span class="nav-number">4.</span> <span class="nav-text">友情链接</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#站点建立时间"><span class="nav-number">5.</span> <span class="nav-text">站点建立时间</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#加入站点内容搜索功能"><span class="nav-number">6.</span> <span class="nav-text">加入站点内容搜索功能</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#网易云跟帖"><span class="nav-number">7.</span> <span class="nav-text">网易云跟帖</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#hexo-wordcount实现统计功能"><span class="nav-number">8.</span> <span class="nav-text">hexo-wordcount实现统计功能</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#leancloud阅读次数统计"><span class="nav-number">9.</span> <span class="nav-text">leancloud阅读次数统计</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#个人网站地址：https-rainyxy-github-io-，顺便求个fork"><span class="nav-number">10.</span> <span class="nav-text">个人网站地址：https://rainyxy.github.io/，顺便求个fork</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#致谢"><span class="nav-number">11.</span> <span class="nav-text">致谢</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#附录1：站点配置文件"><span class="nav-number">12.</span> <span class="nav-text">附录1：站点配置文件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#附录2：背景脚本"><span class="nav-number">13.</span> <span class="nav-text">附录2：背景脚本</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

          

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        
<div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Rainy</span>
</div>


<div class="powered-by">
<span id="busuanzi_container_site_pv">
<span class="post-meta-item-icon">
<span class="uesr"></span>
</span>
<span id="busuanzi_value_site_pv"></span>
</span>
</div>

<div class="theme-info">
<span id="busuanzi_container_site_uv">
<span class="post-meta-item-icon">
<span class="eye-close"></span>
</span>
<span id="busuanzi_value_site_uv"></span>
</span>
</div>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  





  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="true"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("CnBeUkKPdrmEtMrziLQybdTq-gzGzoHsz", "1otQYdA8hE5wUuhaupgYXOgi");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  


  
  <script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>
  

  <a href="https://github.com/RainyXY"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://camo.githubusercontent.com/567c3a48d796e2fc06ea80409cc9dd82bf714434/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_darkblue_121621.png"></a>

 <!--  <script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>
  <script type="text/javascript" color="0,0,255" opacity='0.7' zIndex="-2" count="99" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script> -->

  
</body>
</html>
